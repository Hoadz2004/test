<div class="change-password-container">
    <mat-card class="password-card">
        <mat-card-header>
            <mat-card-title>
                <mat-icon>lock</mat-icon>
                {{ isFirstLogin ? 'Đổi Mật Khẩu Lần Đầu' : 'Đổi Mật Khẩu' }}
            </mat-card-title>
        </mat-card-header>

        <mat-card-content>
            <p *ngIf="isFirstLogin" class="first-login-notice">
                Đây là lần đăng nhập đầu tiên của bạn. Vui lòng đổi mật khẩu để bảo mật tài khoản.
            </p>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Mật khẩu cũ</mat-label>
                <input matInput [type]="hideOld ? 'password' : 'text'" [(ngModel)]="oldPassword">
                <button mat-icon-button matSuffix (click)="hideOld = !hideOld">
                    <mat-icon>{{ hideOld ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Mật khẩu mới</mat-label>
                <input matInput [type]="hideNew ? 'password' : 'text'" [(ngModel)]="newPassword">
                <button mat-icon-button matSuffix (click)="hideNew = !hideNew">
                    <mat-icon>{{ hideNew ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                <mat-hint>Tối thiểu 6 ký tự</mat-hint>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Xác nhận mật khẩu mới</mat-label>
                <input matInput [type]="hideNew ? 'password' : 'text'" [(ngModel)]="confirmPassword">
            </mat-form-field>
        </mat-card-content>

        <mat-card-actions>
            <button mat-raised-button color="primary" (click)="submit()" [disabled]="loading">
                {{ loading ? 'Đang xử lý...' : 'Đổi Mật Khẩu' }}
            </button>
            <button mat-button *ngIf="!isFirstLogin" routerLink="/dashboard">Hủy</button>
        </mat-card-actions>
    </mat-card>
</div>